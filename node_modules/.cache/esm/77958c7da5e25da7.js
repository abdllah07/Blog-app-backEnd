let multer,path;_a5e‍.x([["uploadPicture",()=>uploadPicture]]);_a5e‍.w("multer",[["default",["multer"],function(v){multer=v}]]);_a5e‍.w("path",[["default",["path"],function(v){path=v}]]);


const storage = multer.diskStorage({
    destination : (res , file , cb ) => {
        cb(null , path.join(__dirname, "../uploads"))
    },
    filename : (req , file , cb) => {
        cb(null , `${Date.now()}-${file.originalname}`)
    },
});

const uploadPicture = multer({
    storage : storage,
    limits: {
        fileSize : 1 * 1000000  // 1 MB
    },
    fileFilter : function(req , file , cb) {
        let ext = path.extname(file.originalname);
        if (ext !== '.png' && ext !== '.jpg' && ext !== '.jpeg'){
            return cb(new Error('Only .png, .jpg and .jpeg format allowed!'));
        }
        cb(null , true)
    }
})

