let express,dotenv,connectDB,path,cors,userRoutes,postRoutes,commentRoute,categoryRoute,newsRoute,errorResponseHandler,invalidPathHandler;_a95‍.w("express",[["default",["express"],function(v){express=v}]]);_a95‍.w("dotenv",[["default",["dotenv"],function(v){dotenv=v}]]);_a95‍.w("./config/db",[["default",["connectDB"],function(v){connectDB=v}]]);_a95‍.w("path",[["default",["path"],function(v){path=v}]]);_a95‍.w("cors",[["default",["cors"],function(v){cors=v}]]);_a95‍.w("./routes/UserRoutes",[["default",["userRoutes"],function(v){userRoutes=v}]]);_a95‍.w("./routes/PostRoutes",[["default",["postRoutes"],function(v){postRoutes=v}]]);_a95‍.w("./routes/CommentRoute",[["default",["commentRoute"],function(v){commentRoute=v}]]);_a95‍.w("./routes/PostCategoiesRoutes",[["default",["categoryRoute"],function(v){categoryRoute=v}]]);_a95‍.w("./routes/NewsRoute",[["default",["newsRoute"],function(v){newsRoute=v}]]);_a95‍.w("./middleware/errorHandler",[["errorResponseHandler",["errorResponseHandler"],function(v){errorResponseHandler=v}],["invalidPathHandler",["invalidPathHandler"],function(v){invalidPathHandler=v}]]);




// routes 










dotenv.config();
connectDB()
const app = express();
app.use(express.json());
app.use(cors())

app.get('/' , (req, res) => {
    res.send("server is running")
});

app.use('/api/users' , userRoutes)
app.use('/api/posts' , postRoutes)
app.use('/api/comments' , commentRoute)
app.use('/api/post-categories' , categoryRoute)

app.use('/api/news' , newsRoute)


// static assets 
app.use('/uploads/', express.static(path.join(__dirname, '/uploads')));
app.use(express.static(path.join(__dirname, '..', 'build')));

app.use(invalidPathHandler);
app.use(errorResponseHandler);
app.get('*', (req, res) => {
    res.sendFile(path.resolve(__dirname, 'build', 'index.html'));
});
const PORT = process.env.PORT || 5000 ; 


app.listen(PORT , ()=> console.log(`server is running on port ${PORT}`)); 